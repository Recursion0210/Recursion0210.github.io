---
layout: post
title:  "iOS-webApp客户端 开发小记"
date:   2015-11-05 17:00:15
categories: jekyll update
---
>这篇文章，现在是我写的第二遍，因为就在我刚才准备commit的时候，手贱点了sync，结果白写了一个小时。

暑期以来我一直在一家物联网公司实习，刚来的时候开发了一款物联网云服务的iOS客户端，也许你会问为啥一个实习生刚来就开发产品，主要原因是我能力超强，还有一个很小的原因是全公司就我用Mac，并且学过Swift，哈哈。

我们公司的云产品都是采用HTML5架构的，这样每个平台的客户端只要套个UIWebView的壳子就好。但是问题不是全部网页都是从服务器端加载的，因为不能保证网络一直畅通，以及服务器没有错，要是网络不通，那整个应用就是一片空白，这样的体验太差了。

所以我们的想法是欢迎页、登陆页都是本地的资源，这样应用打开，不管服务器啥情况，用户都是可以看见东西的。

***

###1. 先说说应用逻辑

1. 打开应用，首先加载welcome.htm(原本是jsp文件，在Android平台上可以加载，但是Safari不行，所以直接改了后缀)，welcome.htm的js会从sqlite中取出用户名和密码，若不为空，则直接表单提交登录；如为空，则跳转到本地login.htm界面进行登录

2. 用户在login.htm进行登录，若登录成功，则其中的js文件会将用户名、密码存入sqlite中

3. 应用中有二维码扫描功能，若点击该按钮，则跳转回本地，使用相机进行二维码扫描，然后将结果又返回给网页应用

4. 应用中有退出功能，若点击该按钮，则跳转回本地login.htm界面，其中的js会清空sqlite中数据

***

###2. 再聊聊遇到的问题以及解决方法

1. Xcode7导入本地资源
2. iOS9网络连接问题
3. UIWebView加载本地资源
4. 从网页跳转回本地
5. 二维码扫描功能

   
